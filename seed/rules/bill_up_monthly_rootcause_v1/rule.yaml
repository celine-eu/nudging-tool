rules:
- id: bill_up_monthly_rootcause_v1
  name: Bill up 15% (root cause)
  enabled: true
  family: billing
  type: alert
  severity: alert
  version: 1
  definition:
    kind: kpi_conditions
    dedup_window: monthly
    required_facts:
    - cost_last_month_total_ratio
    - radiation_ghi_last_month_avg_ratio
    - energy_selfcons_last_month_avg_ratio
    - price_last_month_avg_ratio
    conditions:
    - fact_key: cost_last_month_total_ratio
      op: >
      value: 1.15
    - fact_key: radiation_ghi_last_month_avg_ratio
      op: <
      value: 0.99
    - fact_key: energy_selfcons_last_month_avg_ratio
      op: >
      value: 0.99
    - fact_key: price_last_month_avg_ratio
      op: <
      value: 1.01
    logic: AND
    scenarios:
    - bill_up_monthly_rootcause_v1
    evaluator_path: evaluate.py
